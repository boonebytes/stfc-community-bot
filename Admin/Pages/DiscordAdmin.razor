@page "/discord"
@inject DiscordSocketClient discordClient

<h1>Discord</h1>

<table class="table">
    <thead>
        <tr>
            <th class="text-danger">ID</th>
            <th class="text-danger">Name</th>
            <th class="text-danger">Action</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var guild in guilds)
        {
            <tr>
                <td>@guild.Id</td>
                <td>@guild.Name</td>
                <td>L
                    <button @onclick="@(e => guild.LeaveAsync())">Leave</button>
                </td>
            </tr>
        }
    </tbody>
</table>

@code {
    protected List<global::Discord.WebSocket.SocketGuild> guilds;

    protected override void OnInitialized()
    {
        guilds = discordClient.Guilds.ToList();
    }

    protected void LeaveGuild(ulong id)
    {
        discordClient.GetGuild(id).LeaveAsync().RunSynchronously();
    }
}